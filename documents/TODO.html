<!DOCTYPE html><html><head><meta charset="utf-8"><style>body {
  width: 45em;
  border: 1px solid #ddd;
  outline: 1300px solid #fff;
  margin: 16px auto;
}

body .markdown-body
{
  padding: 30px;
}

@font-face {
  font-family: octicons-anchor;
  src: url(data:font/woff;charset=utf-8;base64,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) format('woff');
}

.markdown-body {
  -ms-text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%;
  color: #333;
  overflow: hidden;
  font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif;
  font-size: 16px;
  line-height: 1.6;
  word-wrap: break-word;
}

.markdown-body a {
  background: transparent;
}

.markdown-body a:active,
.markdown-body a:hover {
  outline: 0;
}

.markdown-body strong {
  font-weight: bold;
}

.markdown-body h1 {
  font-size: 2em;
  margin: 0.67em 0;
}

.markdown-body img {
  border: 0;
}

.markdown-body hr {
  -moz-box-sizing: content-box;
  box-sizing: content-box;
  height: 0;
}

.markdown-body pre {
  overflow: auto;
}

.markdown-body code,
.markdown-body kbd,
.markdown-body pre {
  font-family: monospace, monospace;
  font-size: 1em;
}

.markdown-body input {
  color: inherit;
  font: inherit;
  margin: 0;
}

.markdown-body html input[disabled] {
  cursor: default;
}

.markdown-body input {
  line-height: normal;
}

.markdown-body input[type="checkbox"] {
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  padding: 0;
}

.markdown-body table {
  border-collapse: collapse;
  border-spacing: 0;
}

.markdown-body td,
.markdown-body th {
  padding: 0;
}

.markdown-body * {
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

.markdown-body input {
  font: 13px/1.4 Helvetica, arial, freesans, clean, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol";
}

.markdown-body a {
  color: #4183c4;
  text-decoration: none;
}

.markdown-body a:hover,
.markdown-body a:focus,
.markdown-body a:active {
  text-decoration: underline;
}

.markdown-body hr {
  height: 0;
  margin: 15px 0;
  overflow: hidden;
  background: transparent;
  border: 0;
  border-bottom: 1px solid #ddd;
}

.markdown-body hr:before {
  display: table;
  content: "";
}

.markdown-body hr:after {
  display: table;
  clear: both;
  content: "";
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  margin-top: 15px;
  margin-bottom: 15px;
  line-height: 1.1;
}

.markdown-body h1 {
  font-size: 30px;
}

.markdown-body h2 {
  font-size: 21px;
}

.markdown-body h3 {
  font-size: 16px;
}

.markdown-body h4 {
  font-size: 14px;
}

.markdown-body h5 {
  font-size: 12px;
}

.markdown-body h6 {
  font-size: 11px;
}

.markdown-body blockquote {
  margin: 0;
}

.markdown-body ul,
.markdown-body ol {
  padding: 0;
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body ol ol,
.markdown-body ul ol {
  list-style-type: lower-roman;
}

.markdown-body ul ul ol,
.markdown-body ul ol ol,
.markdown-body ol ul ol,
.markdown-body ol ol ol {
  list-style-type: lower-alpha;
}

.markdown-body dd {
  margin-left: 0;
}

.markdown-body code {
  font: 12px Consolas, "Liberation Mono", Menlo, Courier, monospace;
}

.markdown-body pre {
  margin-top: 0;
  margin-bottom: 0;
  font: 12px Consolas, "Liberation Mono", Menlo, Courier, monospace;
}

.markdown-body .octicon {
  font: normal normal 16px octicons-anchor;
  line-height: 1;
  display: inline-block;
  text-decoration: none;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.markdown-body .octicon-link:before {
  content: '\f05c';
}

.markdown-body>*:first-child {
  margin-top: 0 !important;
}

.markdown-body>*:last-child {
  margin-bottom: 0 !important;
}

.markdown-body .anchor {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  display: block;
  padding-right: 6px;
  padding-left: 30px;
  margin-left: -30px;
}

.markdown-body .anchor:focus {
  outline: none;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  position: relative;
  margin-top: 1em;
  margin-bottom: 16px;
  font-weight: bold;
  line-height: 1.4;
}

.markdown-body h1 .octicon-link,
.markdown-body h2 .octicon-link,
.markdown-body h3 .octicon-link,
.markdown-body h4 .octicon-link,
.markdown-body h5 .octicon-link,
.markdown-body h6 .octicon-link {
  display: none;
  color: #000;
  vertical-align: middle;
}

.markdown-body h1:hover .anchor,
.markdown-body h2:hover .anchor,
.markdown-body h3:hover .anchor,
.markdown-body h4:hover .anchor,
.markdown-body h5:hover .anchor,
.markdown-body h6:hover .anchor {
  padding-left: 8px;
  margin-left: -30px;
  line-height: 1;
  text-decoration: none;
}

.markdown-body h1:hover .anchor .octicon-link,
.markdown-body h2:hover .anchor .octicon-link,
.markdown-body h3:hover .anchor .octicon-link,
.markdown-body h4:hover .anchor .octicon-link,
.markdown-body h5:hover .anchor .octicon-link,
.markdown-body h6:hover .anchor .octicon-link {
  display: inline-block;
}

.markdown-body h1 {
  padding-bottom: 0.3em;
  font-size: 2.25em;
  line-height: 1.2;
  border-bottom: 1px solid #eee;
}

.markdown-body h2 {
  padding-bottom: 0.3em;
  font-size: 1.75em;
  line-height: 1.225;
  border-bottom: 1px solid #eee;
}

.markdown-body h3 {
  font-size: 1.5em;
  line-height: 1.43;
}

.markdown-body h4 {
  font-size: 1.25em;
}

.markdown-body h5 {
  font-size: 1em;
}

.markdown-body h6 {
  font-size: 1em;
  color: #777;
}

.markdown-body p,
.markdown-body blockquote,
.markdown-body ul,
.markdown-body ol,
.markdown-body dl,
.markdown-body table,
.markdown-body pre {
  margin-top: 0;
  margin-bottom: 16px;
}

.markdown-body hr {
  height: 4px;
  padding: 0;
  margin: 16px 0;
  background-color: #e7e7e7;
  border: 0 none;
}

.markdown-body ul,
.markdown-body ol {
  padding-left: 2em;
}

.markdown-body ul ul,
.markdown-body ul ol,
.markdown-body ol ol,
.markdown-body ol ul {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body li>p {
  margin-top: 16px;
}

.markdown-body dl {
  padding: 0;
}

.markdown-body dl dt {
  padding: 0;
  margin-top: 16px;
  font-size: 1em;
  font-style: italic;
  font-weight: bold;
}

.markdown-body dl dd {
  padding: 0 16px;
  margin-bottom: 16px;
}

.markdown-body blockquote {
  padding: 0 15px;
  color: #777;
  border-left: 4px solid #ddd;
}

.markdown-body blockquote>:first-child {
  margin-top: 0;
}

.markdown-body blockquote>:last-child {
  margin-bottom: 0;
}

.markdown-body table {
  display: block;
  width: 100%;
  overflow: auto;
  word-break: normal;
  word-break: keep-all;
}

.markdown-body table th {
  font-weight: bold;
}

.markdown-body table th,
.markdown-body table td {
  padding: 6px 13px;
  border: 1px solid #ddd;
}

.markdown-body table tr {
  background-color: #fff;
  border-top: 1px solid #ccc;
}

.markdown-body table tr:nth-child(2n) {
  background-color: #f8f8f8;
}

.markdown-body img {
  max-width: 100%;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

.markdown-body code {
  padding: 0;
  padding-top: 0.2em;
  padding-bottom: 0.2em;
  margin: 0;
  font-size: 85%;
  background-color: rgba(0,0,0,0.04);
  border-radius: 3px;
}

.markdown-body code:before,
.markdown-body code:after {
  letter-spacing: -0.2em;
  content: "\00a0";
}

.markdown-body pre>code {
  padding: 0;
  margin: 0;
  font-size: 100%;
  word-break: normal;
  white-space: pre;
  background: transparent;
  border: 0;
}

.markdown-body .highlight {
  margin-bottom: 16px;
}

.markdown-body .highlight pre,
.markdown-body pre {
  padding: 16px;
  overflow: auto;
  font-size: 85%;
  line-height: 1.45;
  background-color: #f7f7f7;
  border-radius: 3px;
}

.markdown-body .highlight pre {
  margin-bottom: 0;
  word-break: normal;
}

.markdown-body pre {
  word-wrap: normal;
}

.markdown-body pre code {
  display: inline;
  max-width: initial;
  padding: 0;
  margin: 0;
  overflow: initial;
  line-height: inherit;
  word-wrap: normal;
  background-color: transparent;
  border: 0;
}

.markdown-body pre code:before,
.markdown-body pre code:after {
  content: normal;
}

.markdown-body .highlight {
  background: #fff;
}

.markdown-body .highlight .h {
  color: #333;
  font-style: normal;
  font-weight: normal;
}

.markdown-body .highlight .mf,
.markdown-body .highlight .mh,
.markdown-body .highlight .mi,
.markdown-body .highlight .mo,
.markdown-body .highlight .il,
.markdown-body .highlight .m {
  color: #945277;
}

.markdown-body .highlight .s,
.markdown-body .highlight .sb,
.markdown-body .highlight .sc,
.markdown-body .highlight .sd,
.markdown-body .highlight .s2,
.markdown-body .highlight .se,
.markdown-body .highlight .sh,
.markdown-body .highlight .si,
.markdown-body .highlight .sx,
.markdown-body .highlight .s1 {
  color: #df5000;
}

.markdown-body .highlight .kc,
.markdown-body .highlight .kd,
.markdown-body .highlight .kn,
.markdown-body .highlight .kp,
.markdown-body .highlight .kr,
.markdown-body .highlight .kt,
.markdown-body .highlight .k,
.markdown-body .highlight .o {
  font-weight: bold;
}

.markdown-body .highlight .kt {
  color: #458;
}

.markdown-body .highlight .c,
.markdown-body .highlight .cm,
.markdown-body .highlight .c1 {
  color: #998;
  font-style: italic;
}

.markdown-body .highlight .cp,
.markdown-body .highlight .cs,
.markdown-body .highlight .cp .h {
  color: #999;
  font-weight: bold;
}

.markdown-body .highlight .cs {
  font-style: italic;
}

.markdown-body .highlight .n {
  color: #333;
}

.markdown-body .highlight .na,
.markdown-body .highlight .nv,
.markdown-body .highlight .vc,
.markdown-body .highlight .vg,
.markdown-body .highlight .vi {
  color: #008080;
}

.markdown-body .highlight .nb {
  color: #0086B3;
}

.markdown-body .highlight .nc {
  color: #458;
  font-weight: bold;
}

.markdown-body .highlight .no {
  color: #094e99;
}

.markdown-body .highlight .ni {
  color: #800080;
}

.markdown-body .highlight .ne {
  color: #990000;
  font-weight: bold;
}

.markdown-body .highlight .nf {
  color: #945277;
  font-weight: bold;
}

.markdown-body .highlight .nn {
  color: #555;
}

.markdown-body .highlight .nt {
  color: #000080;
}

.markdown-body .highlight .err {
  color: #a61717;
  background-color: #e3d2d2;
}

.markdown-body .highlight .gd {
  color: #000;
  background-color: #fdd;
}

.markdown-body .highlight .gd .x {
  color: #000;
  background-color: #faa;
}

.markdown-body .highlight .ge {
  font-style: italic;
}

.markdown-body .highlight .gr {
  color: #aa0000;
}

.markdown-body .highlight .gh {
  color: #999;
}

.markdown-body .highlight .gi {
  color: #000;
  background-color: #dfd;
}

.markdown-body .highlight .gi .x {
  color: #000;
  background-color: #afa;
}

.markdown-body .highlight .go {
  color: #888;
}

.markdown-body .highlight .gp {
  color: #555;
}

.markdown-body .highlight .gs {
  font-weight: bold;
}

.markdown-body .highlight .gu {
  color: #800080;
  font-weight: bold;
}

.markdown-body .highlight .gt {
  color: #aa0000;
}

.markdown-body .highlight .ow {
  font-weight: bold;
}

.markdown-body .highlight .w {
  color: #bbb;
}

.markdown-body .highlight .sr {
  color: #017936;
}

.markdown-body .highlight .ss {
  color: #8b467f;
}

.markdown-body .highlight .bp {
  color: #999;
}

.markdown-body .highlight .gc {
  color: #999;
  background-color: #EAF2F5;
}

.markdown-body kbd {
  background-color: #e7e7e7;
  background-image: -webkit-linear-gradient(#fefefe, #e7e7e7);
  background-image: linear-gradient(#fefefe, #e7e7e7);
  background-repeat: repeat-x;
  display: inline-block;
  padding: 3px 5px;
  font: 11px Consolas, "Liberation Mono", Menlo, Courier, monospace;
  line-height: 10px;
  color: #000;
  border: 1px solid #cfcfcf;
  border-radius: 2px;
}

.markdown-body .highlight .pl-coc,
.markdown-body .highlight .pl-entm,
.markdown-body .highlight .pl-eoa,
.markdown-body .highlight .pl-mai .pl-sf,
.markdown-body .highlight .pl-pdv,
.markdown-body .highlight .pl-sc,
.markdown-body .highlight .pl-sr,
.markdown-body .highlight .pl-v,
.markdown-body .highlight .pl-vpf {
  color: #0086b3;
}

.markdown-body .highlight .pl-eoac,
.markdown-body .highlight .pl-mdht,
.markdown-body .highlight .pl-mi1,
.markdown-body .highlight .pl-mri,
.markdown-body .highlight .pl-va,
.markdown-body .highlight .pl-vpu {
  color: #008080;
}

.markdown-body .highlight .pl-c,
.markdown-body .highlight .pl-pdc {
  color: #b4b7b4;
  font-style: italic;
}

.markdown-body .highlight .pl-k,
.markdown-body .highlight .pl-ko,
.markdown-body .highlight .pl-kolp,
.markdown-body .highlight .pl-mc,
.markdown-body .highlight .pl-mr,
.markdown-body .highlight .pl-ms,
.markdown-body .highlight .pl-s,
.markdown-body .highlight .pl-sok,
.markdown-body .highlight .pl-st {
  color: #6e5494;
}

.markdown-body .highlight .pl-ef,
.markdown-body .highlight .pl-enf,
.markdown-body .highlight .pl-enm,
.markdown-body .highlight .pl-entc,
.markdown-body .highlight .pl-eoi,
.markdown-body .highlight .pl-sf,
.markdown-body .highlight .pl-smc {
  color: #d12089;
}

.markdown-body .highlight .pl-ens,
.markdown-body .highlight .pl-eoai,
.markdown-body .highlight .pl-kos,
.markdown-body .highlight .pl-mh .pl-pdh,
.markdown-body .highlight .pl-mp,
.markdown-body .highlight .pl-pde,
.markdown-body .highlight .pl-stp {
  color: #458;
}

.markdown-body .highlight .pl-enti {
  color: #d12089;
  font-weight: bold;
}

.markdown-body .highlight .pl-cce,
.markdown-body .highlight .pl-enc,
.markdown-body .highlight .pl-kou,
.markdown-body .highlight .pl-mq {
  color: #f93;
}

.markdown-body .highlight .pl-mp1 .pl-sf {
  color: #458;
  font-weight: bold;
}

.markdown-body .highlight .pl-cos,
.markdown-body .highlight .pl-ent,
.markdown-body .highlight .pl-md,
.markdown-body .highlight .pl-mdhf,
.markdown-body .highlight .pl-ml,
.markdown-body .highlight .pl-pdc1,
.markdown-body .highlight .pl-pds,
.markdown-body .highlight .pl-s1,
.markdown-body .highlight .pl-scp,
.markdown-body .highlight .pl-sol {
  color: #df5000;
}

.markdown-body .highlight .pl-c1,
.markdown-body .highlight .pl-cn,
.markdown-body .highlight .pl-pse,
.markdown-body .highlight .pl-pse .pl-s2,
.markdown-body .highlight .pl-vi {
  color: #a31515;
}

.markdown-body .highlight .pl-mb,
.markdown-body .highlight .pl-pdb {
  color: #df5000;
  font-weight: bold;
}

.markdown-body .highlight .pl-mi,
.markdown-body .highlight .pl-pdi {
  color: #6e5494;
  font-style: italic;
}

.markdown-body .highlight .pl-ms1 {
  background-color: #f5f5f5;
}

.markdown-body .highlight .pl-mdh,
.markdown-body .highlight .pl-mdi {
  font-weight: bold;
}

.markdown-body .highlight .pl-mdr {
  color: #0086b3;
  font-weight: bold;
}

.markdown-body .highlight .pl-s2 {
  color: #333;
}

.markdown-body .highlight .pl-ii {
  background-color: #df5000;
  color: #fff;
}

.markdown-body .highlight .pl-ib {
  background-color: #f93;
}

.markdown-body .highlight .pl-id {
  background-color: #a31515;
  color: #fff;
}

.markdown-body .highlight .pl-iu {
  background-color: #b4b7b4;
}

.markdown-body .highlight .pl-mo {
  color: #969896;
}

.markdown-body .task-list-item {
  list-style-type: none;
}

.markdown-body .task-list-item+.task-list-item {
  margin-top: 3px;
}

.markdown-body .task-list-item input {
  float: left;
  margin: 0.3em 0 0.25em -1.6em;
  vertical-align: middle;
}</style><title>TODO</title></head><body><article class="markdown-body"><h1>
<a id="user-content-annalist-todo" class="anchor" href="#annalist-todo" aria-hidden="true"><span class="octicon octicon-link"></span></a>Annalist TODO</h1>

<p>NOTE: this document is used for short-term working notes; longer-term planning information has been migrated to <a href="https://github.com/gklyne/annalist/issues">Github issues</a> and a <a href="/usr/workspace/github/gklyne/annalist/documents/roadmap.md">roadmap document</a>.</p>

<h1>
<a id="user-content-v017-towards-v018" class="anchor" href="#v017-towards-v018" aria-hidden="true"><span class="octicon octicon-link"></span></a>V0.1.7, towards V0.1.8</h1>

<ul>
<li>[x] Add button to annalist.net page: <a href="https://github.com/BetaNYC/getDataButton">https://github.com/BetaNYC/getDataButton</a>
</li>
<li>[x] Extend form-generator capabilities <a href="https://github.com/gklyne/annalist/issues/2">issue #2</a>

<ul>
<li>[x] Revise representation of repeat field structures in view description: repeat description to be part of root of repeat structure, not an ad ho0c field at the end.  This should remove some special cases from the code.</li>
<li>[x] Refactor handling of repeat field groups</li>
<li>[x] Define type for field group (_group?  Or use _view?)</li>
<li>[x] Use _list rather than _view? (NO: list has much more bound-in semantics)</li>
<li>[x] Rename 'View_field' to (say) 'View_field_view' (cf. previous use _list)</li>
<li>[x] Define view for field group (list of fields)</li>
<li>[x] Define list for field groups (not needed as views used for field-groups)</li>
<li>[x] Redefine view with list of fields?  Not if that impacts usability.</li>
<li>[x] Define e-v-map for defined list of fields</li>
<li>[x] Repeat to reference list of fields </li>
</ul>
</li>
<li>[x] Eliminate duplication with list view - rework list to use same repeating mechanism as view</li>
<li>[x] Provide clean(er) mechanism to propagate extra context to bound fields in repeat group rendering</li>
<li>[x] Try eliminating <code>view_context</code> parameter from <code>FieldListValueMap</code> constructor - turns out that it's needed for generating enumerated type lists based on target type of view, but code has been rationalized and slightly simplified and relevant comments added.</li>
<li>[x] Use distinguished names for internally-generated context keys (e.g. '_fields')</li>
<li>[x] Simplify list template now that repeat fields are handled by a field renderer</li>
<li>[x] Try to make mapping classes more consistent in their return types for sub-context values</li>
<li>[x] Raise error if required view_context information is missing for EntityFinder</li>
<li>[x] Add field for <code>annal:field_entity_type</code> property in field view</li>
<li>[ ] Revisit definitions for BibJSON view; confirm that repeat field groups can be created

<ul>
<li>[ ] Bib_type field should be enumeration</li>
<li>[x] Month, year on same line</li>
<li>[ ] Restrict view choices field to views that are not subsidiary field groups</li>
</ul>
</li>
<li>[ ] Improve display of view fields: put field names in header of repeat-group

<ul>
<li>view, edit, colhead, colview, coledit render options; template gets to choose</li>
<li>think how this plays with responsive content</li>
</ul>
</li>
</ul>

<p>(merge rework-form-manager to develop branch)</p>

<ul>
<li><p>[ ] Review options for creating user accounts in development software version (currently have 'admin'/admin@localhost in sitedata as holding option).  Put something explicit in makedevelsite.sh? Document site 'admin' user and development setup?</p></li>
<li><p>[ ] Consider use of "hidden" flags on views, types, fields, etc. to avoid cluttering UI with internal details?  (defer?)</p></li>
<li>[ ] Think about fields that return subgraph (defer?)

<ul>
<li>how to splice subgraph into parent - "lambda nodes"?</li>
<li>does field API support this? Check.</li>
</ul>
</li>
<li>[ ] Generalize collection/site hierarchy to use a "search path" of imported collections (defer)</li>
<li>[ ] Review field placement and layout grid density (16col instead of 12col?)</li>
</ul>

<p>(sub-release?)</p>

<ul>
<li>[ ] Blob upload and linking support <a href="https://github.com/gklyne/annalist/issues/31">#31</a>

<ul>
<li>[ ] Blob and file upload support: images, spreadsheets, ...</li>
<li>[ ] Field type to link to uploaded file</li>
</ul>
</li>
<li>[ ] Security and robust deployability enhancements <a href="https://github.com/gklyne/annalist/issues/12">#12</a>

<ul>
<li>[ ] Shared deployment should generate a new secret key in settings</li>
<li>[ ] Need way to cleanly shut down server processes (annalist-manager option?)</li>
<li>[ ] See if annalist-manager runserver can run service directly, rather than via manage.py/django-admin?</li>
</ul>
</li>
<li>[ ] Figure out how to preserve defined users when reinstalling the software.

<ul>
<li>I think it is because the Django sqlite database file is replaced.  Arranging for per-configuration database files (per above) might alleviate this.</li>
</ul>
</li>
<li>[ ] <code>annalist-manager</code> help to provide list of permission tokens</li>
<li>[ ] Automated test suite for annalist_manager

<ul>
<li>[ ] annalist-manager initialize [ CONFIG ]</li>
<li>[ ] annalist-manager createadminuser [ username [ email [ firstname [ lastname ] ] ] ] [ CONFIG ]</li>
<li>[ ] annalist-manager updateadminuser [ username ] [ CONFIG ]</li>
<li>[ ] annalist-manager setdefaultpermissions [ permissions ] [ CONFIG ]</li>
<li>[ ] annalist-manager setpublicpermissions [ permissions ] [ CONFIG ]</li>
<li>[ ] annalist-manager deleteuser [ username ] [ CONFIG ]</li>
<li>[ ] annalist-manager createsitedata [ CONFIG ]</li>
<li>[ ] annalist-manager updatesitedata [ CONFIG ]</li>
</ul>
</li>
<li>[ ] annalist-manager options for users, consider:

<ul>
<li>[ ] annalist-manager createlocaluser [ username [ email [ firstname [ lastname ] ] ] ] [ CONFIG ]</li>
<li>[ ] annalist-manager setuserpermissions [ username [ permissions ] ] [ CONFIG ]</li>
</ul>
</li>
<li>[ ] 'New' and 'Copy' from list view should bring up new form with id field selected, so that typing a new value replaces the auto-generated ID.</li>
<li>[ ] 'Add field' can't be followed by 'New field' because of duplicate property used</li>
<li>[ ] Easy way to view log; from command line (via annalist-manager); from web site (link somewhere)

<ul>
<li>[x] annalist-manager serverlog command returns log file name</li>
<li>[ ] site link to view log</li>
</ul>
</li>
<li>[ ] Usability issues arising from creating cruising log

<ul>
<li>[ ] Want option to create linked record directly from other record entry field (issue #??).</li>
<li>[ ] Fields should default to previous value entered.  How to save these?</li>
</ul>
</li>
</ul>

<p>(sub-release?)</p>

<ul>
<li>[ ] Linked data support <a href="https://github.com/gklyne/annalist/issues/19">#19</a>

<ul>
<li>[ ] Think about use of CURIES in data (e.g. for types, fields, etc.)  Need to store prefix info with collection.  Think about base URI designation at the same time, as these both seem to involve JSON-LD contexts.</li>
<li>[ ] JSON-LD @contexts support</li>
<li>[ ] Alternative RDF formats support</li>
</ul>
</li>
<li>[ ] Code and service review  <a href="https://github.com/gklyne/annalist/issues/1">#1</a>
</li>
<li>[ ] Review concurrent access issues; document assumptions</li>
<li>[ ] Use site/collection data to populate help panes on displays; use Markdown.</li>
<li>[ ] review use of template files vs. use of inline template text in class

<ul>
<li>[x] Need to support edit/view/item/head (NOT: probably via class inheritance structure)</li>
<li>[x] Inline template text should be more efficient as it avoids repeated reading of template files</li>
<li>[x] Inline template text keeps value mapping logic with template logic</li>
<li>[ ] Inline templates may be harder to style effectively; maybe read HTML from file on first use?</li>
</ul>
</li>
<li>[ ] Simplify generic view tests <a href="https://github.com/gklyne/annalist/issues/33">#33</a>
</li>
<li>[ ] Provide content for the links in the page footer</li>
</ul>

<p>Notes for Future TODOs:</p>

<ul>
<li>[ ] introduce general validity checking framework to entityvaluemap structures (cf. unique property URI check in views) - allow specific validity check(s) to be associated with view(s). </li>
<li>[ ] New field renderer for displaying/selecting/entering type URIs, using scan of type definitions</li>
<li>[ ] Make default values smarter; e.g. field renderer logic to scan collection data for candidates?</li>
<li>[ ] Option to rearrange fields on view form (after restructuring?)</li>
<li>[ ] When creating type, default URI to be based on id entered</li>
<li>[ ] Allow type definition to include template for new id, e.g. based on current date</li>
<li>[ ] Use local prefix for type URI (when prefixes are handled properly); e.g. coll:Type/</li>
<li>[ ] Associate a prefix with a collection? </li>
<li>[ ] Provide a way to edit collection metadata (e.g. link from Customize page)</li>
<li>[ ] Provide a way to edit site metadata (e.g. via link from site front page)</li>
<li>[ ] Provide a way to view/edit site user permissions (e.g. via link from site front page)</li>
<li>[ ] Provide a way to view/edit site type/view/list/etc descriptions (e.g. via link from site front page)</li>
<li>[ ] Undefined list error display (any error?) - include link to collection in top bar</li>
<li>[ ] Help display for view: use commentary text from view descrtiption; thus can tailore help for each view.</li>
<li>[ ] Introduce markdown rendering type</li>
<li>[ ] Use markdown directly for help text</li>
<li>[ ] Consider associating property URI with view rather than/as well as field, so fields can be re-used</li>
<li>[ ] Option to auto-generate unique property URI for field in view, maybe using field definition as base</li>
<li>[ ] Need easier way to make new entries for fields that are referenced from a record; e.g. a <code>New value</code> button as part of an enum field.</li>
<li>[ ] Instead of separate link on the login page, have "Local" as a login service option.</li>
<li>[ ] Entity edit view: "New field" -&gt; "New field type"</li>
</ul>

<h1>
<a id="user-content-bibjson-structures" class="anchor" href="#bibjson-structures" aria-hidden="true"><span class="octicon octicon-link"></span></a>BibJSON structures</h1>

<p>(later:  copy to documentation/notes directory)</p>

<p>cf. <a href="http://okfnlabs.org/bibjson/">http://okfnlabs.org/bibjson/</a></p>

<h2>
<a id="user-content-simple-string-fields" class="anchor" href="#simple-string-fields" aria-hidden="true"><span class="octicon octicon-link"></span></a>Simple string fields</h2>

<p>address: Publisher's address (usually just the city, but can be the full address for lesser-known publishers)</p>

<p>[annote: An annotation for annotated bibliography styles (not typical) @@ use rdfs:comment?</p>

<p>booktitle: The title of the book, if only part of it is being cited</p>

<p>chapter: The chapter number</p>

<p>edition: The edition of a book, long form (such as "First" or "Second")</p>

<p>editor: (see Bib_person_field_view below)</p>

<p>eprint: A specification of an electronic publication, often a preprint or a technical report @@handle as identifier/link?</p>

<p>howpublished: How it was published, if the publishing method is nonstandard</p>

<p>institution: The institution that was involved in the publishing, but not necessarily the publisher</p>

<p>journal: (see Bib_journal_field_view below)</p>

<p>[key: A hidden field used for specifying or overriding the alphabetical order of entries (when the "author" and "editor" fields are missing).]</p>

<p>month: The month of publication (or, if unpublished, the month of creation)</p>

<p>[note: Miscellaneous extra information @@ use rdfs:comment?]</p>

<p>number: The "(issue) number" of a journal, magazine, or tech-report, if applicable. (Most 
publications have a "volume", but no "number" field.)</p>

<p>organization: The conference sponsor</p>

<p>pages: Page numbers, separated either by commas or double-hyphens.</p>

<p>publisher: The publisher's name</p>

<p>school: The school where the thesis was written</p>

<p>series: The series of books the book was published in (e.g. "The Hardy Boys" or "Lecture Notes in Computer Science") @@ field missing</p>

<p>title: The title of the work</p>

<p>type: The field overriding the default type of publication (e.g. "Research Note" for techreport, "{PhD} dissertation" for phdthesis, "Section" for inbook/incollection)</p>

<p>volume: The volume of a journal or multi-volume book</p>

<p>year: The year of publication (or, if unpublished, the year of creation)</p>

<h2>
<a id="user-content-object-fields" class="anchor" href="#object-fields" aria-hidden="true"><span class="octicon octicon-link"></span></a>Object fields</h2>

<h3>
<a id="user-content-bib_person_field_view" class="anchor" href="#bib_person_field_view" aria-hidden="true"><span class="octicon octicon-link"></span></a>Bib_person_field_view</h3>

<p>author: [list] The name(s) of the author(s)
editor: [list] The name(s) of the editor(s)</p>

<pre><code>id:
name:
alternate:
firstname:
lastname:
</code></pre>

<h3>
<a id="user-content-bib_journal_field_view" class="anchor" href="#bib_journal_field_view" aria-hidden="true"><span class="octicon octicon-link"></span></a>Bib_journal_field_view</h3>

<p>journal: [object] The journal or magazine the work was published in
    id:
    name:
    shortcode:</p>

<h3>
<a id="user-content-bib_license_field_view" class="anchor" href="#bib_license_field_view" aria-hidden="true"><span class="octicon octicon-link"></span></a>Bib_license_field_view</h3>

<p>license is a list of objects
license:
    type:
    url:
    description:
    jurisdiction:</p>

<h3>
<a id="user-content-bib_identifier_field_view" class="anchor" href="#bib_identifier_field_view" aria-hidden="true"><span class="octicon octicon-link"></span></a>Bib_identifier_field_view</h3>

<p>identifier is a list of objects
identifier:
    id:
    type: (e.g. DOI, crossref,)
    url:
    anchor:</p>

<h2>
<a id="user-content-entity-types" class="anchor" href="#entity-types" aria-hidden="true"><span class="octicon octicon-link"></span></a>Entity types</h2>

<h3>
<a id="user-content-article" class="anchor" href="#article" aria-hidden="true"><span class="octicon octicon-link"></span></a>article</h3>

<p>An article from a journal or magazine.
Required fields: author, title, journal, year
Optional fields: volume, number, pages, month, note, key</p>

<h3>
<a id="user-content-book" class="anchor" href="#book" aria-hidden="true"><span class="octicon octicon-link"></span></a>book</h3>

<p>A book with an explicit publisher.
Required fields: author/editor, title, publisher, year
Optional fields: volume/number, series, address, edition, month, note, key</p>

<h3>
<a id="user-content-booklet" class="anchor" href="#booklet" aria-hidden="true"><span class="octicon octicon-link"></span></a>booklet</h3>

<p>A work that is printed and bound, but without a named publisher or sponsoring institution.
Required fields: title
Optional fields: author, howpublished, address, month, year, note, key</p>

<h3>
<a id="user-content-conference" class="anchor" href="#conference" aria-hidden="true"><span class="octicon octicon-link"></span></a>conference</h3>

<p>The same as inproceedings, included for Scribe compatibility.</p>

<h3>
<a id="user-content-inbook" class="anchor" href="#inbook" aria-hidden="true"><span class="octicon octicon-link"></span></a>inbook</h3>

<p>A part of a book, usually untitled. May be a chapter (or section, etc.) and/or a range of pages.
Required fields: author/editor, title, chapter/pages, publisher, year
Optional fields: volume/number, series, type, address, edition, month, note, key</p>

<p>incollection
A part of a book having its own title.
Required fields: author, title, booktitle, publisher, year
Optional fields: editor, volume/number, series, type, chapter, pages, address, edition, month, note, key
inproceedings
An article in a conference proceedings.
Required fields: author, title, booktitle, year
Optional fields: editor, volume/number, series, pages, address, month, organization, publisher, note, key
manual
Technical documentation.
Required fields: title
Optional fields: author, organization, address, edition, month, year, note, key
mastersthesis
A Master's thesis.
Required fields: author, title, school, year
Optional fields: type, address, month, note, key
misc
For use when nothing else fits.
Required fields: none
Optional fields: author, title, howpublished, month, year, note, key
phdthesis
A Ph.D. thesis.
Required fields: author, title, school, year
Optional fields: type, address, month, note, key
proceedings
The proceedings of a conference.
Required fields: title, year
Optional fields: editor, volume/number, series, address, month, publisher, organization, note, key
techreport
A report published by a school or other institution, usually numbered within a series.
Required fields: author, title, institution, year
Optional fields: type, number, address, month, note, key
unpublished
A document having an author and title, but not formally published.
Required fields: author, title, note
Optional fields: month, year, key</p>
</article></body></html>