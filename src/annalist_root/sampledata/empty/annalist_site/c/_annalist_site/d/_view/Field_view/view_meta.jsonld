{ "@id":                    "_view/Field_view"
, "@type":                  ["annal:View"]
, "@context":               [{"@base": "../../"}, "../../coll_context.jsonld"]
, "annal:type_id":          "_view"
, "annal:id":               "Field_view"
, "rdfs:label":             "Field definition"
, "rdfs:comment": "# Field definition view\r\n\r\nDefines a field that may be used in a [View]($BASE:_type/_view), [List]($BASE:_type/_list) or another [Field]($BASE:_type/_field) definition.\r\n\r\nUsed to view Instances of record type [View field]($BASE:_type/_field) (`annal:Field`).\r\n\r\nField definitions are a key element of Annalist mechanisms for presenting and editing data records. There are many fields, many of which used only in support of particular presentation options, and are otherwise ignored.\r\n\r\n## Common fields (applicable to all field render types)\r\n\r\n### [Id]($BASE:_field/Field_id/): \r\nField identifier: used internally to identify a particular field definition, and also to name value fields on HTML forms used to present the data.\r\n\r\n### [Field render type]($BASE:_field/Field_render_type/):\r\nindicates a renderer that is used for presentation of this fields.  The value selected here controls both the format of the stored data, and how it is presented on the form for editing and viewing.  A list of available field render types can viewed at [$BASE:_enum_render_type/?scope=all]($BASE:_enum_render_type/?scope=all)\r\n\r\n### [Label]($BASE:_field/Field_label/): \r\na short label used to describe this field.\r\n\r\n### [Help]($BASE:_field/Field_comment/): \r\na longer text description of this field.  Intended to be used to generate online help messages to assist user data entry and field selection when designing entity views.\r\n\r\n### [Property]($BASE:_field/Field_property/): \r\na URI or CURIE that is used as a key for the corresponding value in saved JSON data, and also as an property URI for data exported as RDF.\r\n\r\n### [Position/Size]($BASE:_field/Field_placement/):\r\nindicates field placement on a displayed page.  A number of options are presented, annoted with \"(*pos*/*wid*)\", \"(*pos*/*wid* right)\" or \"(*pos*/*wid* column)\".  The placement is based on a 12-column grid, where *pos* is the start column for the field, and *wid* is the number of columns occupied on a medium or larger display.  On small displays, all fields occupy the entire display width unless the placement includes the \"columns\" annotation.  The \"right\" annotation is intended for right justification of columns that appear at the end of a row, but has been rarely used in practice.\r\n\r\n### [Field value type]($BASE:_field/Field_value_type/): \r\nA URI or CURIE for type of value displayed by this field.\r\n\r\nFor repeating value fields (render types [Field group sequence]($BASE:_enum_render_type/Group_Seq), [Field group sequence as table]($BASE:_enum_render_type/Group_Seq_Row), [Field group set]($BASE:_enum_render_type/Group_Set) or [Field group set as table]($BASE:_enum_render_type/Group_Set_Row)) and multifield reference fields (render type [Fields of referenced entity]($BASE:_enum_render_type/RefMultifield/)), the value type specified is used to select applicable subfield options (i.e. subfields applicable to the specified entity type), and may be the same as the entity type of the containing field.\r\n\r\nWhile currently used for selecting subfield options, this is also intended to provide additional information about the intended field values, and possibly to provide data type URIs for literals in JSON-LD/RDF data generated by Annalist.\r\n\r\n### [Value mode]($BASE:_field/Field_value_mode/):\r\nindicates how the displayed value is accessed.  One of [Direct value]($BASE:_enum_value_mode/Value_direct/), [Entity reference]($BASE:_enum_value_mode/Value_entity/), [Field reference]($BASE:_enum_value_mode/Value_field/), [Import from web]($BASE:_enum_value_mode/Value_import/), [File upload]($BASE:_enum_value_mode/Value_upload/).  If in doubt, use **Direct value**.\r\n\r\n### [Entity type]($BASE:_field/Field_entity_type/):\r\nType (URI or CURIE) of entity type (or supertype) for which the field is applicable. Used to determine entities for which the field type is offered as an option.  Leave blank if the field is to be available for all entity types.\r\n\r\n### [Default]($BASE:_field/Field_default/):\r\nDefault value for this field.  Leave blank if there is no default value.\r\n\r\n## Text entry fields\r\n\r\n### [Placeholder]($BASE:_field/Field_placeholder/):\r\nString value used as a placeholder for text entry fields. Use this to proviode a prompt or example of input that may be entered.  (The Annalist site data follows a convention of putting parentheses around placeholder text, but this is not a requirement.)\r\n\r\n## Entity reference fields\r\n\r\nSome fields contain a cross-reference to another entity.  The following apply to descriptions of such fields.\r\n\r\n### [Refer to type]($BASE:_field/Field_typeref/):\r\nIdentifies a type in the current collection to whose instances the field value refers.  Instances of this type are offered in a dropdown list for selection. (If subsequent deletion or renaming of a selected type means it no longer exists, the originally selected value is shown as `_type/type_id`.)\r\n\r\n### [Refer to field]($BASE:_field/Field_fieldref/):\r\nThe URI or CURIE of a property URI that keys a field of a referenced record.  Ther indicated field is displayed when viewing an entity, but an entity selection dropdown is provided.  (Not currently used - use of the [Fields of referenced entity]($BASE:_enum_render_type/RefMultifield/) renderer is generally prefered.)\r\n\r\n### [Value restriction]($BASE:_field/Field_restrict/): \r\na selection filter to restrict enumerated values (per 'annal:field_ref_type') that are candidate values for inclusion in the selction drop-down.  This is a textual expression that defines selection criteria.\r\n\r\nExample:\r\n\r\n      entity[annal:view_entity_type] subtype [annal:field_entity_type]\r\n\r\nThe filter operates by comparing fields from a entity under consideration with a field from the containing entity, or from the view that is used to display it.\r\n\r\nSelector formats:\r\n\r\n      ALL (or blank)              match any entity\r\n      <val1> == <val2>            values are the same.\r\n      <val1> in <val2>            second value is list containing 1st value, or values are same, \r\n                                  or <val1> is None.\r\n      <val1> subtype <val2>       first value is a subtype of, or same type as, the second value.\r\n\r\n`<val1>` and `<val2>` may be:\r\n\r\n      [<field-id>]                tests a field of the entity under consideration for inclusion.\r\n      entity[<field-id>]          refers to a field of containing entity.\r\n      view[<field-id>]            refers to a field of the view definition currently displayed.\r\n      field[<field-id>]           refers to the field definition for the current field.\r\n      group[<field-id]            for subfields contained within a repeating field group, \r\n                                  refers to a field of the repeating field group definition.\r\n      \"<string>\"                  literal string value.  Quotes within are escaped.\r\n\r\n<field_id> values are URIs or CURIEs, using URI characters (per RFC3986), except that '[' and ']' are not allowed.\r\n\r\n## Repeating value fields\r\n\r\n### [Subfields]($BASE:_field/Field_fields/): \r\na list of sub-fields that are repeated within the containing field.  Each field is described by a [Subfield Id]($BASE:_field/Field_subfield_sel), and optional [Subfield URI]($BASE:_field/Field_subfield_property) and [Subfield Pos/size]($BASE:_field/Field_subfield_placement) fields.  If the optional values are not specified, corresponding values from the referenced subfield definition are used.\r\n\r\n(The list of fields was previously defined via a reference to a field group, but that made defining certain form structures rather complex; this field includes referenced sub-fields directly in a field definition.)\r\n\r\n[Add fields label]($BASE:_field/Field_repeat_label_add/):\r\na text label for the button used to add new repeating value entries.\r\n\r\n[Delete fields label]($BASE:_field/Field_repeat_label_delete/):\r\na text label for the button used to remove an existing entry.\r\n\r\n## Multi-field references\r\n\r\n### [Subfields]($BASE:_field/Field_fields/): \r\na list of sub-fields that are displayed from a referenced entity within the containing field.  Each field is described by a [Subfield Id]($BASE:_field/Field_subfield_sel), and optional [Subfield URI]($BASE:_field/Field_subfield_property) and [Subfield Pos/size]($BASE:_field/Field_subfield_placement) fields.  If the optional values are not specified, corresponding values from the referenced subfield definition are used.\r\n"
, "annal:view_entity_type": "annal:Field"
, "annal:open_view":        false
, "annal:view_fields":
  [ { "annal:field_id":         "_field/Field_id"
    , "annal:field_placement":  "small:0,12;medium:0,6"
    }
  , { "annal:field_id":         "_field/Field_render_type"
    , "annal:field_placement":  "small:0,12;medium:6,6"
    }
  , { "annal:field_id":         "_field/Field_label"
    , "annal:field_placement":  "small:0,12"
    }
  , { "annal:field_id":         "_field/Field_help"
    , "annal:field_placement":  "small:0,12"
    }
  , { "annal:field_id":         "_field/Field_property"
    , "annal:field_placement":  "small:0,12;medium:0,6"
    }
  , { "annal:field_id":         "_field/Field_placement"
    , "annal:field_placement":  "small:0,12;medium:6,6"
    }
  , { "annal:field_id":         "_field/Field_superproperty_uris"
    , "annal:field_placement":  "small:0,12"
    }
  , { "annal:field_id":         "_field/Field_value_type"
    , "annal:field_placement":  "small:0,12;medium:0,6"
    }
  , { "annal:field_id":         "_field/Field_value_mode"
    , "annal:field_placement":  "small:0,12;medium:6,6"
    }
  , { "annal:field_id":         "_field/Field_entity_type"
    , "annal:field_placement":  "small:0,12;medium:0,6"
    }
  , { "annal:field_id":         "_field/Field_typeref"
    , "annal:field_placement":  "small:0,12;medium:0,6"
    }
  , { "annal:field_id":         "_field/Field_fieldref"
    , "annal:field_placement":  "small:0,12;medium:6,6"
    }
  , { "annal:field_id":         "_field/Field_default"
    , "annal:field_placement":  "small:0,12"
    }
  , { "annal:field_id":         "_field/Field_placeholder"
    , "annal:field_placement":  "small:0,12"
    }
  , { "annal:field_id":         "_field/Field_tooltip"
    , "annal:field_placement":  "small:0,12"
    }
  , { "annal:field_id":         "_field/Field_fields"
    , "annal:field_placement":  "small:0,12"
    }
  , { "annal:field_id":         "_field/Field_repeat_label_add"
    , "annal:field_placement":  "small:0,12;medium:0,6"
    }
  , { "annal:field_id":         "_field/Field_repeat_label_delete"
    , "annal:field_placement":  "small:0,12;medium:6,6"
    }
  , { "annal:field_id":         "_field/Field_restrict"
    , "annal:field_placement":  "small:0,12"
    }
  ]
, "annal:view_task_buttons":
  [ { "annal:button_id":        "_task/Define_subproperty_field" 
    , "annal:button_label":     "Define subproperty field"
    , "annal:button_help":      "Create a new field whose property URI is a subproperty of the current fields property.  (The URI of the current field property] is inserted as a superproperty URI of the new field.)"
    }
  ]
, "annal:edit_task_buttons":
  [ { "annal:button_id":        "_task/Define_many_field" 
    , "annal:button_label":     "Define repeat field"
    , "annal:button_help":      "Define new field that allows zero, one or more occurrences of the current field.  The multiple occurrences are supported through repeated use of the field property URI (as opposed to a list field).  (New set field definitions are created with default values derived from the current field, and may be edited later.)"
    }
  , { "annal:button_id":        "_task/Define_list_field" 
    , "annal:button_label":     "Define list field"
    , "annal:button_help":      "Define new field that contains an ordered list of values of the current field.  The multiple values are represented using an RDF list structure.  (New list field definitions are created with default values derived from the current field, and may be edited later.)"
    }
  , { "annal:button_id":        "_task/Define_field_ref"
    , "annal:button_label":     "Define field reference"
    , "annal:button_help":      "Define new field containing a reference to the current field.  (New definitions have default values, and may be edited later.  Additional fields may be added later.)"
    }
  ]
}
